{% import 'form.html.twig' as form %}

<div class="row">
    <div class="col-12 col-md-6">
        <div class="row mb-3">
            <div class="col-12">
                <div class="wii-section-title mr-0">{{ trans('Demande', 'Acheminements', 'Lettre de voiture', "Contact expéditeur") }}</div>
            </div>
        </div>
        <div class="form-group row">
            <div class="col-12">
                <label class="wii-field-name">{{ trans('Demande', 'Acheminements', 'Lettre de voiture', "Nom") }}</label>
            </div>
            <div class="col-12">
                <input title="{{ trans('Demande', 'Acheminements', 'Lettre de voiture', "Contact expéditeur") }} {{ trans('Demande', 'Acheminements', 'Lettre de voiture', "Nom") }}"
                       name="consignorUsername"
                       class="form-control data needed"
                       value="{{ consignorUsername }}"/>
            </div>
        </div>
        <div class="form-group row">
            <div class="col-12">
                <label class="wii-field-name">{{ trans('Demande', 'Acheminements', 'Lettre de voiture', "Téléphone - Email") }}</label>
            </div>
            <div class="col-12">
                <input title="{{ trans('Demande', 'Acheminements', 'Lettre de voiture', "Contact expéditeur") }} {{ trans('Demande', 'Acheminements', 'Lettre de voiture', "Téléphone - Email") }}"
                       name="consignorEmail"
                       class="form-control data forbidden-phone-numbers needed"
                       value="{{ consignorEmail }}"/>
            </div>
        </div>
    </div>
    <div class="col-12 col-md-6">
        <div class="row mb-3">
            <div class="col-12">
                <div class="wii-section-title ml-0">{{ trans('Demande', 'Acheminements', 'Lettre de voiture', "Contact destinataire") }}</div>
            </div>
        </div>
        <div class="form-group row">
            <div class="col-12">
                {{ form.select('receiverUsername', trans('Demande', 'Acheminements', 'Lettre de voiture', 'Nom'), true, {
                    type: 'customers',
                    items: [{label: receiverUsername, value: receiverUsername, selected: true}],
                    labelOptions: {
                        class: 'm-0',
                    },
                }) }}
            </div>
        </div>
        <div class="form-group row">
            <div class="col-12">
                <label class="wii-field-name">{{ trans('Demande', 'Acheminements', 'Lettre de voiture', "Téléphone - Email") }}</label>
            </div>
            <div class="col-12">
                <input title="{{ trans('Demande', 'Acheminements', 'Lettre de voiture', "Contact destinataire") }} {{ trans('Demande', 'Acheminements', 'Lettre de voiture', "Téléphone - Email") }}"
                       name="receiverEmail"
                       class="form-control data forbidden-phone-numbers needed"
                       value="{{ receiverEmail }}"/>
            </div>
        </div>
    </div>
    <div class="col-12">
        <button class="btn btn-primary btn-sm mt-2"
                type="button"
                onclick="reverseFields($(this), 'consignorUsername', 'receiverUsername');
                reverseFields($(this), 'consignorEmail', 'receiverEmail');">
            {{ trans('Demande', 'Acheminements', 'Lettre de voiture', "Inverser contact expéditeur / contact destinataire") }}
        </button>
    </div>
</div>
<hr class="mb-4"/>
<div class="row">
    <div class="col-12 col-md-6">
        <div class="form-group row">
            <div class="col-12">
                <label class="wii-field-name">{{ trans('Demande', 'Acheminements', 'Lettre de voiture', 'Transporteur') }}</label>
            </div>
            <div class="col-12">
                <textarea title="{{ trans('Demande', 'Acheminements', 'Lettre de voiture', 'Transporteur') }}"
                          name="carrier"
                          style="resize: none"
                          oninput="limitTextareaLength($(this), 7, 50)"
                          rows="7"
                          class="form-control data needed">{{ carrier }}</textarea>
            </div>
        </div>
    </div>
    <div class="col-12 col-md-6">
        <div class="form-group row">
            <div class="col-12">
                <label class="wii-field-name">{{ trans('Demande', 'Acheminements', 'Lettre de voiture', "Date d'acheminement") }}</label>
            </div>
            <div class="col-12">
                <input type="date"
                       class="form-control data"
                       name="dispatchDate"
                       title="{{ trans('Demande', 'Acheminements', 'Lettre de voiture', "Date d'acheminement") }}"
                       value="{{ dispatchDate }}"/>
            </div>
        </div>
    </div>

    <div class="col-12 col-md-6">
        <div class="form-group row">
            <div class="col-12">
                <label class="wii-field-name">{{ trans('Demande', 'Acheminements', 'Lettre de voiture', "Expéditeur") }}</label>
            </div>
            <div class="col-12">
                <textarea title="{{ trans('Demande', 'Acheminements', 'Lettre de voiture', "Expéditeur") }}"
                          name="consignor"
                          style="resize: none"
                          oninput="limitTextareaLength($(this), 7, 50)"
                          rows="7"
                          class="form-control data needed">{{ consignor }}</textarea>
            </div>
            <div class="col-12">
                <button class="btn btn-primary btn-sm mt-2"
                        type="button"
                        onclick="reverseFields($(this), 'consignor', 'receiver')">{{ trans('Demande', 'Acheminements', 'Lettre de voiture', "Inverser expéditeur/destinataire") }}</button>
            </div>
        </div>
    </div>

    <div class="col-12 col-md-6">
        <div class="form-group row">
            <div class="col-12">
                <label class="wii-field-name">{{ trans('Demande', 'Acheminements', 'Lettre de voiture', "Destinataire") }}</label>
            </div>
            <div class="col-12">
                <textarea title="{{ trans('Demande', 'Acheminements', 'Lettre de voiture', "Destinataire") }}"
                          name="receiver"
                          style="resize: none"
                          oninput="limitTextareaLength($(this), 7, 50)"
                          rows="7"
                          class="form-control data needed">{{ receiver }}</textarea>
            </div>
        </div>
    </div>
</div>
<hr class="mb-4"/>
<div class="row">
    <div class="col-12 col-md-6">
        <div class="form-group row">
            <div class="col-12">
                <label class="wii-field-name">{{ trans('Demande', 'Acheminements', 'Lettre de voiture', "Lieu de chargement") }}</label>
            </div>
            <div class="col-12">
                <input title="{{ trans('Demande', 'Acheminements', 'Lettre de voiture', "Lieu de chargement") }}"
                       name="locationFrom"
                       class="form-control data needed"
                       value="{{ locationFrom }}"/>
            </div>
            <div class="col-12">
                <button class="btn btn-primary btn-sm mt-2"
                        type="button"
                        onclick="reverseFields($(this), 'locationFrom', 'locationTo')">{{ trans('Demande', 'Acheminements', 'Lettre de voiture', "Inverser chargement / déchargement") }}</button>
            </div>
        </div>
    </div>
    <div class="col-12 col-md-6">
        <div class="form-group row">
            <div class="col-12">
                <label class="wii-field-name">{{ trans('Demande', 'Acheminements', 'Lettre de voiture', "Lieu de déchargement") }}</label>
            </div>
            <div class="col-12">
                <input title="{{ trans('Demande', 'Acheminements', 'Lettre de voiture', "Lieu de déchargement") }}"
                       name="locationTo"
                       class="form-control data needed"
                       value="{{ locationTo }}"/>
            </div>
        </div>
    </div>
</div>
<hr class="mb-4"/>

<div class="row">
    <div class="col-12">
        <div class="form-group row">
            <div class="col-12">
                <label class="wii-field-name">{{ trans('Demande', 'Acheminements', 'Lettre de voiture', "Note de bas de page") }}</label>
            </div>
            <div class="col-12">
                <textarea class="form-control data"
                          name="notes"
                          title="{{ trans('Demande', 'Acheminements', 'Lettre de voiture', "Note de bas de page") }}"
                          style="resize: none"
                          oninput="limitTextareaLength($(this), 2, 100)"
                          rows="2">{{ notes }}</textarea>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <em class="col-12">
        {{ trans('Demande', 'Acheminements', 'Lettre de voiture', "Information : Le contenu des UL doit être modifié sur les UL") }}
    </em>
    {% if packsCounter > constant('App\\Service\\DispatchService::WAYBILL_MAX_PACK') %}
        <div class="col-12 error-msg">
            {{ trans('Demande', 'Acheminements', 'Général', "Attention : L'acheminement contient plus de {1} unités logistiques, cette lettre de voiture ne peut contenir plus de {1} lignes.", {
                '1':  constant('App\\Service\\DispatchService::WAYBILL_MAX_PACK')
            }) }}
        </div>
    {% endif %}
</div>

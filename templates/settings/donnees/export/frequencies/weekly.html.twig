{% import 'form.html.twig' as form %}

<div class="frequency every-week-frequency">
    <div class="col-12 p-3 form-inline form-group">
        <label class="wii-field-name">Démarrer le*</label>
        <input type="datetime-local"
               class="form-control form-control-sm ml-2 frequency-data"
               name="weekly-start-on"
               title="Démarrer le"
               placeholder="jj/mm/aaaa"
               min="now"
               value=""/>
    </div>

    <div class="form-inline">
        <div class="col-12 p-3">
            Répéter toutes les
            <input type="number"
                   name="weekly-frequency-interval"
                   class="form-control form-control-sm mx-2 w-px-50 mb-2 frequency-data"
                   data-label="Intervalle de jours"
                   value=""
                   min="1">
            semaines à
            <input type="time"
                   name="weekly-frequency-time"
                   class="form-control form-control-sm mx-2 w-px-100 mb-2 frequency-data"
                   data-label="Heures et minutes"
                   value="">

            {% set date = [] %}
            {% set day = date('monday this week') %}
            {% for dayIndex in 1..7 %}
                {% set dayLabel = day %}
                {% set date = date|merge([{label: dayLabel | format_date('none', 'EEEE', null, 'gregorian', 'fr') | capitalize, value: dayIndex}]) %}
                {% set day = day | date_modify('+1 day') %}
            {% endfor %}
            {{ form.select('weekly-frequency-days-week', 'le :', false, {
                items: date,
                multiple: true
            }) }}
        </div>
    </div>
</div>

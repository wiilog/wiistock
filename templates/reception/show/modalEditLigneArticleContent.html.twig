{% set packCode = ligneArticle.receptionLine and ligneArticle.receptionLine.pack ? ligneArticle.receptionLine.pack.code %}
{% set isReferenceAttachedToUnit = reception.arrival is not null and packCode %}
<div class="row">
    <div class="form-group {{ isReferenceAttachedToUnit ? 'col-xl-6' }} col-12  w-100 mb-3">
        <label for="reference" title="référence" class="wii-field-name">
            {{ trans('Stock', 'Références', 'référence', false) }}*
        </label>
        {% set isLigneArticleEditable = ligneArticle.quantite is empty or ligneArticle.quantite == 0 %}
        <select class="{{ isLigneArticleEditable ? 'ajax-autocomplete-edit' }} data form-control needed"
                name="referenceArticle"
                {{ not isLigneArticleEditable ? 'disabled' }}>
            <option value="{{ligneArticle.referenceArticle.id}}">{{ligneArticle.referenceArticle.reference}}</option>
        </select>
    </div>
    {% if isReferenceAttachedToUnit %}
        <div class="form-group col-xl-6 col-12">
            <label class="wii-field-name">{{ trans('Traçabilité', 'Général', 'Unité logistique') }}</label>
            <input class="form-control" disabled type="text" name="logisticUnit" value="{{ packCode }}">
        </div>
    {% endif %}
    <div class="form-group col-6">
        <label class="wii-field-name">Numéro de commande d'achat*</label>
        {% if reception.orderNumber is not empty %}
            <select name="commande"
                    class="form-control needed w-100 data">
                {% for orderNumber in reception.orderNumber %}
                    <option {{ ligneArticle.commande == orderNumber ? 'selected' }}
                            value="{{ orderNumber }}">
                        {{ orderNumber }}
                    </option>
                {% endfor %}
            </select>
        {% else %}
            <input type="text"
                   class="form-control data needed wii-field-text"
                   name="commande"
                   value="{{ligneArticle.commande}}">
        {% endif %}
    </div>
    <div class="form-group col-6">
        <label class="wii-field-name">Quantité à recevoir*</label>
        <input type="number"
               class="form-control data needed"
               value="{{ligneArticle.quantiteAR}}"
               name="quantiteAR"
               min="{{ minValue }}"
               onchange="updateQuantityToReceive($(this));"/>
    </div>
    {% if canUpdateQuantity %}
        <div class="form-group col-6">
            <label class="wii-field-name">Quantité reçue*</label>
            <input type="number"
                   class="form-control data needed"
                   name="quantite"
                   value="{{ ligneArticle.quantite is not empty ? ligneArticle.quantite : 0 }}"
                   min=0
                   max="{{ ligneArticle.quantiteAR }}">
        </div>
    {% endif %}
    <div class="form-group col-6">
        <label class="wii-field-text">Anomalie</label>
        <label class="switch">
            <input class="checkbox" type="checkbox" name="anomalie" {{ ligneArticle.anomalie == 'true' ? 'checked': ''}}>
            <span class="slider round"></span>
        </label>
    </div>
    <div class="form-group col-12">
        <label class="wii-field-name">Commentaire</label>
        <input id='commentaire' class="form-control data" name="commentaire" type="hidden">
        <div class="editor-container-article" data-wysiwyg>{{ligneArticle.commentaire | raw}}</div>
    </div>
</div>

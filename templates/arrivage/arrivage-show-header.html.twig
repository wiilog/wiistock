{% extends 'utils/show-header.html.twig' %}


{% block showHiddenInputs %}
    <input hidden value="{{ arrivage.id }}" id="arrivageId">
    <input hidden value="{{ arrivage.numeroarrivage }}" id="numeroArrivage">
    <input hidden value="{{ printColis is defined ? printColis : false }}" id="printColis">
    <input hidden value="{{ printArrivage is defined ? printArrivage : false }}" id="printArrivage">
{% endblock %}

{% block showTitleTooltip 'arrivage' %}
{% block showTitle ('arrivage.arrivage'|trans) %}
{% block showSubtitle (arrivage.numeroArrivage) %}

{% block showActions %}

{% set allPacksAlreadyInDispatch = allPacksAlreadyInDispatch is defined and allPacksAlreadyInDispatch %}

    <div class="btn-group">
        {% if hasRight(constant('App\\Entity\\Menu::TRACA'), constant('App\\Entity\\Action::EDIT_ARRI')) %}
            <button type="button"
                    data-id='{{ arrivage.id }}'
                    data-target='#modalEditArrivage'
                    onclick="editRowArrivage($(this))"
                    data-toggle='modal' class="btn btn-primary ml-auto split-button">
                Modifier
            </button>
        {% endif %}
        <button type="button" class="btn btn-outline-primary dropdown-toggle dropdown-toggle-split"
                data-toggle="dropdown"
                aria-haspopup="true"
                aria-expanded="false">
            <span class="fa fa-angle-down"></span>
        </button>
        <div class="dropdown-menu dropdown-follow-gt dropdown-menu-right pointer">
            <a class="dropdown-item"
               id="printArrivageBtn"
               href="{{ path('print_arrivage_bar_codes', {arrivage: arrivage.id, printArrivage: 1}) }}">
                <i class='fas fa-print pointer mr-2'></i>
                Imprimer <span title="arrivage">{{ 'arrivage.arrivage'|trans }}</span>
            </a>
            {% if not allPacksAlreadyInDispatch and hasRight(constant('App\\Entity\\Menu::DEM'), constant('App\\Entity\\Action::CREATE_ACHE')) %}
                <button class="dropdown-item dispatch-button" data-id="{{ arrivage.id }}">
                    <i class="fas fa-exchange-alt mr-2"></i>
                    {{ 'arrivage.Acheminer'|trans }}
                </button>
            {% endif %}
            {% if canBeDeleted %}
                {% if hasRight(constant('App\\Entity\\Menu::TRACA'), constant('App\\Entity\\Action::DELETE_ARRI')) %}
                    <a href="" data-id='{{ arrivage.id }}' data-target='#modalDeleteArrivage' data-toggle='modal'
                       class="dropdown-item d-flex align-items-center"
                       onclick="deleteRowArrivage($(this), $('#modalDeleteArrivage'), $('#submitDeleteArrivage'))">
                        <span class="wii-icon wii-icon-trash-black mr-2"></span>
                        Supprimer
                    </a>
                {% endif %}
            {% endif %}
        </div>
    </div>
{% endblock %}

{% block showUrgence %}
    {% if arrivage.isUrgent is defined and arrivage.isUrgent == true %}
        <i class="fa fa-exclamation-triangle mr-2"></i>
        <span title="cet arrivage">{{ 'arrivage.cet arrivage'|trans }}</span> est Ã  traiter en URGENCE.
    {% endif %}
{% endblock %}

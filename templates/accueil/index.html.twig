{% extends 'layout.html.twig' %}

{% block wrapperClass 'd-flex flex-column' %}
{% block pageContainerClass 'flex-grow-1 p-0' %}

{% block title %}Dashboard{% endblock %}

{% block subtitle %}
    {% if hasRight(constant('App\\Entity\\Menu::ACCUEIL'), constant('App\\Entity\\Action::DISPLAY_INDI')) %}
        <div class="dashboard-spinner spinner-border spinner-border-sm text-white" role="status">
            <span class="sr-only">Loading...</span>
        </div>
    {% endif %}
{% endblock %}

{% block page_content %}
    {% if hasRight(constant('App\\Entity\\Menu::ACCUEIL'), constant('App\\Entity\\Action::DISPLAY_INDI')) %}
        <div id="carousel-dashboard" class="carousel slide">
            <ol class="carousel-indicators">
                <li data-target="#carousel-dashboard"
                    data-slide-to="0"
                    data-name="arrivage"></li>
                <li data-target="#carousel-dashboard"
                    data-slide-to="1"
                    data-name="quai"></li>
                <li data-target="#carousel-dashboard"
                    data-slide-to="2"
                    data-name="admin"></li>
                <li data-target="#carousel-dashboard"
                    data-slide-to="3"
                    data-name="emballage"></li>
            </ol>

            <div class="carousel-inner h-100">
                <div class="carousel-item"
                     data-name="arrivage">
                    <div class="col-12">
                        {% include 'accueil/dashboardArrival.html.twig' %}
                    </div>
                </div>
                <div class="carousel-item"
                     data-name="quai">
                    <div class="col-12">
                        {% include 'accueil/dashboardDockReception.html.twig' with { 'isDashboardExt': 0 } %}
                    </div>
                </div>
                <div class="carousel-item"
                     data-name="admin">
                    <div class="col-12">
                        {% include 'accueil/dashboardAdminReception.html.twig' with { 'isDashboardExt': 0 } %}
                    </div>
                </div>
                <div class="carousel-item"
                     data-name="emballage">
                    <div class="col-12">
                        {% include 'accueil/dashboardMonitoringPackaging.html.twig' with { 'isDashboardExt': 0 } %}
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-12 little-font text-right fixed-bottom z-index-back d-none refresh-date-container">
                    Actualis√© le : <span class="refreshDate"></span>
                </div>
            </div>
        </div>
    {% endif %}

    {% if isCurrentClient(constant('App\\Service\\SpecificService::CLIENT_CEA_LETI')) %}
        {% include "accueil/linkToAddArticleForm.html.twig" %}
    {% endif %}

{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('js/dashboard.js') }}?{{ date().timestamp }}"></script>
{% endblock %}

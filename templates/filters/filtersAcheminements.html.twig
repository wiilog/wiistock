{% extends 'filters/filters.html.twig' %}

{% block filters %}
    {% set fromDashboard = statusFilter is defined and statusFilter is not empty and typesFilter is defined and typesFilter is not empty %}
    <input name="fromDashboard" value="{{ fromDashboard }}" type="hidden"/>
    {% include 'filters/filter_item/filterDate.html.twig' with {
        disabled: fromDashboard ? 'disabled',
    } %}
    {% include 'filters/filter_item/filterDispatch.html.twig' with {
        disabled: fromDashboard ? 'disabled',
    } %}
    {% include 'filters/filter_item/filterStatus.html.twig' with {
        name: 'statut',
        placeholder: trans('Demande', 'Général', 'Statut', false),
        filterStatus: statusFilter,
        disabled: fromDashboard ? 'disabled',
    } %}
    {% include 'filters/filter_item/filterTypeMultiple.html.twig' with {
        types: types,
        filterTypes: typesFilter,
        disabled: fromDashboard ? 'disabled',
    } %}
    {% set fieldCode = constant('App\\Entity\\FieldsParam::FIELD_CODE_REQUESTER_DISPATCH') %}
    {% if fieldsParam|isFieldRequired(fieldCode, 'displayedFilters') %}
        {% include 'filters/filter_item/filterUser.html.twig' with {
            name: 'requesters',
            placeholder: trans('Demande', 'Général', 'Demandeurs', false),
            disabled: fromDashboard ? 'disabled',
        } %}
    {% endif %}
    {% set fieldCode = constant('App\\Entity\\FieldsParam::FIELD_CODE_CARRIER_DISPATCH') %}
    {% if fieldsParam|isFieldRequired(fieldCode, 'displayedFilters') %}
        {% include 'filters/filter_item/filterCarrier.html.twig' with {
            disabled: fromDashboard ? 'disabled',
        } %}
    {% endif %}
    {% set fieldCode = constant('App\\Entity\\FieldsParam::FIELD_CODE_EMERGENCY') %}
    {% if fieldsParam|isFieldRequired(fieldCode, 'displayedFilters') %}
        {% include 'filters/filter_item/filterEmergencyMultiple.html.twig' with {
            disabled: fromDashboard ? 'disabled',
        } %}
    {% endif %}
    {% set fieldCode = constant('App\\Entity\\FieldsParam::FIELD_CODE_RECEIVER_DISPATCH') %}
    {% if fieldsParam|isFieldRequired(fieldCode, 'displayedFilters') %}
        {% include 'filters/filter_item/filterUser.html.twig' with {
            name: 'receivers',
            placeholder: trans('Demande', 'Général', 'Destinataire(s)', false),
            disabled: fromDashboard ? 'disabled',
        } %}
    {% endif %}
    {% set fieldCode = constant('App\\Entity\\FieldsParam::FIELD_CODE_COMMAND_NUMBER_DISPATCH') %}
    {% if fieldsParam|isFieldRequired(fieldCode, 'displayedFilters') %}
        {% include 'filters/filter_item/filterCommandList.html.twig' with {
            disabled: fromDashboard ? 'disabled',
        } %}
    {% endif %}
    {% set fieldCode = constant('App\\Entity\\FieldsParam::FIELD_CODE_DESTINATION') %}
    {% if fieldsParam|isFieldRequired(fieldCode, 'displayedFilters') %}
        {% include 'filters/filter_item/filterDestination.html.twig' with {
            disabled: fromDashboard ? 'disabled',
        } %}
    {% endif %}
    {% set fieldCode = constant('App\\Entity\\FieldsParam::FIELD_CODE_LOCATION_PICK') %}
    {% if fieldsParam|isFieldRequired(fieldCode, 'displayedFilters') %}
        {% include 'filters/filter_item/filterLocation.html.twig' with {
            name: 'pickLocation',
            removeId: true,
            disabled: fromDashboard ? 'disabled',
        } %}
    {% endif %}
    {% set fieldCode = constant('App\\Entity\\FieldsParam::FIELD_CODE_LOCATION_DROP') %}
    {% if fieldsParam|isFieldRequired(fieldCode, 'displayedFilters') %}
        {% include 'filters/filter_item/filterLocation.html.twig' with {
            name: 'dropLocation',
            removeId: true,
            disabled: fromDashboard ? 'disabled',
        } %}
    {% endif %}

    {% include 'filters/filter_item/filterPacks.html.twig' with {
        multiple: true,
    } %}
{% endblock %}

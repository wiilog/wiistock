{% extends 'filters/filters.html.twig' %}

{% block filters %}
    {% if dateChoices is defined %}
        {% include 'filters/filter_item/filterDateWithChoice.html.twig' %}
    {% else %}
        {% include 'filters/filter_item/filterDate.html.twig' %}
    {% endif %}


    {% if page == 'PAGE_HAND' %}
        {% include 'filters/filter_item/filterType.html.twig' with {
            onchange: 'onFilterTypeChange($(this))',
            placeholder: trans('Demande', 'Général', 'Type', false)
        } %}
        {% include 'filters/filter_item/filterMultipleStatuses.html.twig' %}
    {% else %}
        {% include 'filters/filter_item/filterType.html.twig' %}
        {% include 'filters/filter_item/filterStatus.html.twig' %}
    {% endif %}

    {% if displayDemandFilter is defined and displayDemandFilter %}
        {% include 'filters/filter_item/filterDemand.html.twig' %}
    {% endif %}

    {% include 'filters/filter_item/filterUser.html.twig' with {
        placeholder: (page == 'PAGE_HAND'
            ? trans('Demande', 'Général', 'Demandeurs', false)
            : trans('Général', null, 'Zone filtre', 'Utilisateurs', false))
    } %}

    {% if page == 'PAGE_HAND' %}
        {% include 'filters/filter_item/filterSubject.html.twig' %}
        {% set fieldCode = constant('App\\Entity\\FieldsParam::FIELD_CODE_RECEIVERS_HANDLING') %}
        {% if fieldsParam|isFieldRequired(fieldCode, 'displayedFilters') %}
            {% include 'filters/filter_item/filterUser.html.twig' with {
                name: 'receivers',
                'placeholder': trans('Demande', 'Général', 'Destinataire(s)', false)
            } %}
        {% endif %}
    {% endif %}

    {% if emergencies is defined %}
        {% set fieldCode = constant('App\\Entity\\FieldsParam::FIELD_CODE_EMERGENCY') %}
        {% if fieldsParam|isFieldRequired(fieldCode, 'displayedFilters') %}
            {% include 'filters/filter_item/filterEmergencyMultiple.html.twig' %}
        {% endif %}
    {% elseif emergency is defined and emergency %}
        {% include 'filters/filter_item/filterEmergency.html.twig' %}
    {% endif %}

    {% set fieldCode = constant('App\\Entity\\FieldsParam::FIELD_CODE_DEMANDE_PROJECT') %}
    {% if fieldsParam|isFieldRequired(fieldCode, 'displayedFilters') %}
        {% include 'filters/filter_item/filterProject.html.twig' %}
    {% endif %}
{% endblock %}
